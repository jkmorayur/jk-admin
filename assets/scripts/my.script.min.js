$(document).ready(function () {
     var table = $("#sample").dataTable({
          "bProcessing": true,
          oLanguage: {
               sProcessing: "asdasdsa"
          }
     });
     
     $('.datepicker').datepicker({
          format: "dd/mm/yyyy"
     }).on('changeDate', function (e) {
          $(this).datepicker('hide');
     });

     $('.editor').redactor({
          focus: true,
          lang: 'en',
          imageUpload: 'ajax/upload.php',
          plugins: ['fontfamily', 'fontsize', 'fullscreen', 'fontcolor', 'table', 'imagemanager']
     });
     /*Change password*/

     $("#frmChangePassword").submit(function (e) {
          e.preventDefault();
     }).validate({
          rules: {
               old: "required",
               'new': {
                    required: true,
                    minlength: 8
               },
               new_confirm: {
                    equalTo: '#new'
               }
          },
          messages: {
               old: "Old password required",
               'new': {
                    required: "New Password required",
                    minlength: "Password at least 8 characters in length"
               },
               new_confirm: {
                    equalTo: 'Password missmatch'
               }
          },
          submitHandler: function (form) {
               form.submit();
          }
     });
     /*Form product*/
     $("#frmProduct").submit(function (e) {
          e.preventDefault();
     }).validate({
          rules: {
               'product[prd_name]': "required"
          },
          messages: {
               'product[prd_name]': "Please enter product name"
          },
          submitHandler: function (form) {
               form.submit();
          }
     });
     /*Form product*/
     
     /*Delete image*/

     $('.btnDeleteImage').on('click',function () {
          if (confirm('Are you sure want to delete brnd image?')) {
               var url = $(this).attr('data-url');
               $.ajax({
                    type: 'post',
                    url: url,
                    dataType: 'json',
                    success: function (resp) {
                         showMessage(resp.msg, resp.status);
                    }
               });
          }
     });
     /*Delete image*/
     
     $(document).on('click', '.deleteRow', function () {
          if (confirm('Are you sure want to delete this record?')) {
               var url = $(this).attr('data-url');
               var id = $(this).attr('id');

               var oTable = $('#sample').dataTable();
               var rowIndex = oTable.fnGetPosition($(this).closest('tr')[0]);

               $.ajax({
                    type: 'post',
                    url: url,
                    dataType: 'json',
                    success: function (resp) {
                         showMessage(resp.msg, resp.status);
                         oTable.fnDeleteRow(rowIndex);
                    }
               });
          }
     });
});

function showMessage(message, type) {
     $('.success').hide();
     $('.error').hide();
     $('.info').hide();
     $('.alert').hide();
     if (type == 'success') {
          $('.success').slideDown(500);
          $('.sus_msg').html(message);
     } else if (type == 'fail') {
          $('.error').slideDown(500);
          $('.err_msg').html(message);
     } else if (type == 'info') {
          $('.info').slideDown(500);
          $('.err_inf').html(message);
     } else if (type == 'alert') {
          $('.alert').slideDown(500);
          $('.err_alt').html(message);
     }
}